<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Review</title>
        <!-- star symbol:  -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="css/review.css">
        <script src="js/jquery-2.1.0.min.js"></script>
        <script type="text/javascript">
            function submitForm(){
                var fields = $('#rateRestaurant').serializeArray();
                var obj = {};
                $.each(fields, function(index, field) {
                    obj[field.name] = field.value;
                });
                // Add restaurant name
                let rest_name = document.getElementById('rest_name').innerHTML
                obj['restaurantname'] = rest_name
                // set score to nothing if null 
                if (obj['rating'] === '-'){ obj['rating'] = ''}

                console.log(rest_name)
                console.log(fields)
                console.log(obj)
                $.ajax({
                    type: "post",
                    url: "http://localhost:8080/post-review",
                    async: true,
                    contentType: 'application/json',
                    dataType: 'JSON',
                    data: JSON.stringify(obj),
                    success: function(data) {
                        alert("Register succeeded!");
                    }
                });
            }
        </script>
    </head>
    <body>
        <div class="container">
            <div class='rest_name' id="rest_name">McDonald's</div>
<!--            <div class="food_name">Food Item</div>-->
            <form id="rateRestaurant" action="">
                <div class="rating">
                    <i class="fa fa-star unchecked" id="one" value=1></i>
                    <i class="fa fa-star unchecked" id="two" value=2></i>
                    <i class="fa fa-star unchecked" id="three" value=3></i>
                    <i class="fa fa-star unchecked" id="four" value=4></i>
                    <i class="fa fa-star unchecked" id="five" value=5></i>
                    <input id="ratingScore" name="rating" value='-'></input>
                </div>
                <script src='js/review.js'></script>
                
                <textarea class="review_box" name='review'
                          placeholder="Write about your experience here =)"></textarea>
                <input type="button" class="submit" onclick="submitForm()" value="rate">
            </form>
        </div>
        <div class='msg_section'>
            <p>Thank You for your <br> purchase!</p>
        </div>
    </body>
</html>